!function(i){i(document).on("sowsetupformfield",".siteorigin-widget-field-type-tinymce",function(t){var e=i(this);if(!e.data("initialized")){var n=e.find(".siteorigin-widget-tinymce-container"),o=n.data("editorSettings"),a=n.find("textarea"),c=a.attr("id"),r=function(i){i.on("change",function(){window.tinymce.get(c).save(),a.trigger("change")})};if(o.tinymce=i.extend({},o.tinymce,{selector:"#"+c,setup:r}),i(document).one("wp-before-tinymce-init",function(i,t){if(t.selector===o.tinymce.selector){var a=n.data("mediaButtons");e.find(".wp-editor-tabs").before(a.html)}}),i(document).one("tinymce-editor-setup",function(){e.find(".wp-editor-wrap").hasClass(o.selectedEditor+"-active")||setTimeout(function(){window.switchEditors.go(c)},10)}),wp.editor.remove(c),a.is(":visible"))wp.editor.initialize(c,o);else var s=setInterval(function(){a.is(":visible")&&(wp.editor.initialize(c,o),clearInterval(s))},500);e.on("click",function(t){var n=i(t.target),o=n.hasClass("wp-switch-editor")?"tmce":"html";if("tmce"===o){var r=window.tinymce.get(c);if(n.hasClass("switch-tmce")&&null!==r){var s=a.val();-1!==s.search("<")&&-1===s.search(">")&&(s=s.replace(/</g,""),a.val(s)),r.setContent(window.switchEditors.wpautop(s))}e.find(".siteorigin-widget-tinymce-selected-editor").val(o)}}),e.data("initialized",!0)}})}(jQuery);